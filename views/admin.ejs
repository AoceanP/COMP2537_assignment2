<%- include("templates/header") %>

<div class="container mt-5">
  <h1 class="text-center mb-4">Admin Dashboard</h1>

  <table class="table table-striped text-center">
    <thead class="thead-dark">
      <tr>
        <th>Username</th>
        <th>Role</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      <% users.forEach(user => { %>
        <tr>
          <td><%= user.username %></td>
          <td><%= user.user_type %></td>
          <td>
            <% if (user.user_type === "user") { %>
              <form method="POST" action="/promote" style="display:inline;">
                <input type="hidden" name="username" value="<%= user.username %>">
                <button class="btn btn-danger btn-sm">Promote to Admin</button>
              </form>
            <% } else if (user.username !== session.username) { %>
              <form method="POST" action="/demote" style="display:inline;">
                <input type="hidden" name="username" value="<%= user.username %>">
                <button class="btn btn-success btn-sm">Demote to User</button>
              </form>
            <% } else { %>
              <span class="text-muted">You</span>
            <% } %>
          </td>
        </tr>
      <% }); %>
    </tbody>
  </table>
</div>

<%- include("templates/footer") %>