<%- include("templates/header") %>

<h1 class="text-center mt-5">Admin Dashboard</h1>

<table class="table table-striped text-center mt-3 w-75 mx-auto">
  <thead>
    <tr>
      <th>Username</th>
      <th>Role</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <% users.forEach(user => { %>
      <tr>
        <td><%= user.username === session.username ? 'Me' : user.username %></td>
        <td><%= user.user_type %></td>
        <td>
          <% if (user.username !== session.username) { %>
            <!-- Promote Button -->
            <form method="POST" action="/promote" style="display:inline;">
              <input type="hidden" name="username" value="<%= user.username %>">
              <button type="submit" class="btn btn-danger btn-sm" style="background-color: #dc3545; border: none;">
                Promote to Admin
              </button>
            </form>

            <!-- Demote Button -->
            <form method="POST" action="/demote" style="display:inline;">
              <input type="hidden" name="username" value="<%= user.username %>">
              <button type="submit" class="btn btn-success btn-sm" style="background-color: #198754; border: none;">
                Demote to User
              </button>
            </form>
          <% } else { %>
            <span class="text-muted">â€”</span>
          <% } %>
        </td>
      </tr>
    <% }) %>
  </tbody>
</table>

<%- include("templates/footer") %>

